// Include theming for Angular Material with `mat.theme()`.
// This Sass mixin will define CSS variables that are used for styling Angular Material
// components according to the Material 3 design spec.
// Learn more about theming and how to use it for your application's
// custom components at https://material.angular.dev/guide/theming
@use '@angular/material' as mat;

/* Self-hosted fonts for offline/intranet deployment */
@font-face {
  font-family: 'Material Icons';
  font-style: normal;
  font-weight: 400;
  src: url('/assets/fonts/MaterialIcons-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 300;
  src: url('/assets/fonts/Roboto-Light.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: url('/assets/fonts/Roboto-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  src: url('/assets/fonts/Roboto-Medium.woff2') format('woff2');
}

.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
}

/* CSS Variable Fallbacks for offline deployment */
:root {
  /* Primary colors - Renesas Blue */
  --mat-sys-primary: #4a5db8;
  --mat-sys-on-primary: #ffffff;
  --mat-sys-primary-container: #dee1ff;
  --mat-sys-on-primary-container: #00105c;

  /* Surface colors */
  --mat-sys-surface: #fdfbff;
  --mat-sys-surface-container: #f1f0f4;
  --mat-sys-surface-container-low: #f7f5f9;
  --mat-sys-surface-container-high: #ebeaee;
  --mat-sys-surface-container-highest: #e5e4e8;
  --mat-sys-surface-container-lowest: #ffffff;
  --mat-sys-on-surface: #1b1b1f;
  --mat-sys-on-surface-variant: #46464f;

  /* Outline colors */
  --mat-sys-outline: #777680;
  --mat-sys-outline-variant: #c7c5d0;

  /* Tertiary colors */
  --mat-sys-tertiary: #4a5db8;
  --mat-sys-on-tertiary: #ffffff;

  /* Error colors */
  --mat-sys-error: #ba1a1a;
  --mat-sys-on-error: #ffffff;
}

// Custom Renesas Electronics Blue palette
$renesas-blue-palette: (
  0: #000000,
  10: #0d1033,
  20: #1a2066,
  25: #1e2d6b,
  30: #2f409a,
  35: #3a4da8,
  40: #4a5db8,
  50: #6275c8,
  60: #7b8ed8,
  70: #95a7e5,
  80: #b0c0f0,
  90: #d0daf8,
  95: #e8edfc,
  98: #f5f7fe,
  99: #fafbff,
  100: #ffffff,
);

html {
  @include mat.theme((
    color: (
      primary: $renesas-blue-palette,
      tertiary: $renesas-blue-palette,
    ),
    typography: Roboto,
    density: 0,
  ));

  // CRITICAL: Override light-dark() for browsers that don't support it
  // This ensures colors work on older browsers without light-dark() support
  --mat-sys-primary: #4a5db8;
  --mat-sys-on-primary: #ffffff;
  --mat-sys-primary-container: #d0daf8;
  --mat-sys-on-primary-container: #2f409a;
  --mat-sys-tertiary: #4a5db8;
  --mat-sys-on-tertiary: #ffffff;
  --mat-sys-tertiary-container: #d0daf8;
  --mat-sys-on-tertiary-container: #2f409a;
  --mat-sys-surface: #fdfbff;
  --mat-sys-surface-dim: #ddd9e0;
  --mat-sys-surface-bright: #fdfbff;
  --mat-sys-surface-container: #f1f0f4;
  --mat-sys-surface-container-low: #f7f5f9;
  --mat-sys-surface-container-high: #ebeaee;
  --mat-sys-surface-container-highest: #e5e4e8;
  --mat-sys-surface-container-lowest: #ffffff;
  --mat-sys-on-surface: #1b1b1f;
  --mat-sys-on-surface-variant: #46464f;
  --mat-sys-outline: #777680;
  --mat-sys-outline-variant: #c7c5d0;
  --mat-sys-inverse-surface: #303034;
  --mat-sys-inverse-on-surface: #f3f0f4;
  --mat-sys-inverse-primary: #b0c0f0;
  --mat-sys-error: #ba1a1a;
  --mat-sys-on-error: #ffffff;
  --mat-sys-error-container: #ffdad6;
  --mat-sys-on-error-container: #410002;
  --mat-sys-background: #fdfbff;
  --mat-sys-on-background: #1b1b1f;
  --mat-sys-shadow: #000000;
  --mat-sys-scrim: #000000;
  --mat-sys-surface-tint: #4a5db8;
}

body {
  // Default the application to a light color theme. This can be changed to
  // `dark` to enable the dark color theme, or to `light dark` to defer to the
  // user's system settings.
  color-scheme: light;

  // Set a default background, font and text colors for the application using
  // Angular Material's system-level CSS variables. Learn more about these
  // variables at https://material.angular.dev/guide/system-variables
  background-color: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font: var(--mat-sys-body-medium);

  // Reset the user agent margin.
  margin: 0;
}
/* You can add global styles to this file, and also import other style files */

html, body { height: 100%; }
body { margin: 0; font-family: Roboto, "Helvetica Neue", sans-serif; }

/* Global Material Dialog Styling */
.cdk-overlay-container {
  z-index: 1000 !important;
}

.cdk-overlay-backdrop {
  background-color: rgba(0, 0, 0, 0.32) !important;
}

.mat-mdc-dialog-container {
  background-color: white !important;
  border-radius: 8px !important;
  box-shadow: 0 11px 15px -7px rgba(0,0,0,.2), 0 24px 38px 3px rgba(0,0,0,.14), 0 9px 46px 8px rgba(0,0,0,.12) !important;
}

.mat-mdc-dialog-surface {
  background-color: white !important;
  border-radius: 8px !important;
}

.mat-mdc-dialog-content {
  max-height: 65vh !important;
  overflow-y: auto !important;
}

.mat-mdc-dialog-actions {
  padding: 16px 24px !important;
  border-top: 1px solid var(--mat-sys-outline-variant) !important;
}

/* Workflow Template Dialog Styling */
.workflow-template-dialog {
  .mat-mdc-dialog-container {
    background-color: white !important;
    border-radius: 8px !important;
    padding: 0 !important;
  }

  .mat-mdc-dialog-surface {
    background-color: white !important;
    border-radius: 8px !important;
  }
}

/* Ensure CDK overlay pane has proper positioning */
.cdk-overlay-pane {
  max-width: 100vw !important;
}

/* Global overlay wrapper - centers all overlays by default */
/* Note: Removed :has() selectors for Edge 86 compatibility */
.cdk-global-overlay-wrapper {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Snackbar positioning - override to top */
.mat-mdc-snack-bar-container {
  position: fixed !important;
  top: 16px !important;
}

/* Global Snackbar Styles */
.mat-mdc-snack-bar-container {
  margin-top: 16px !important;
  pointer-events: auto;

  &.success-snackbar {
    --mdc-snackbar-container-color: #323232;
    --mdc-snackbar-supporting-text-color: #ffffff;

    .mat-mdc-snackbar-surface {
      background-color: #323232 !important;
    }

    .mat-mdc-snack-bar-label {
      color: #ffffff !important;
    }

    .mat-mdc-button.mat-mdc-snack-bar-action {
      color: #4caf50 !important;
    }
  }

  &.error-snackbar {
    --mdc-snackbar-container-color: #d32f2f;
    --mdc-snackbar-supporting-text-color: #ffffff;

    .mat-mdc-snackbar-surface {
      background-color: #d32f2f !important;
    }

    .mat-mdc-snack-bar-label {
      color: #ffffff !important;
    }

    .mat-mdc-button.mat-mdc-snack-bar-action {
      color: #ffffff !important;
    }
  }

  &.warning-snackbar {
    --mdc-snackbar-container-color: #ff9800;
    --mdc-snackbar-supporting-text-color: #000000;

    .mat-mdc-snackbar-surface {
      background-color: #ff9800 !important;
    }

    .mat-mdc-snack-bar-label {
      color: #000000 !important;
    }

    .mat-mdc-button.mat-mdc-snack-bar-action {
      color: #000000 !important;
    }
  }

  &.info-snackbar {
    --mdc-snackbar-container-color: #2196f3;
    --mdc-snackbar-supporting-text-color: #ffffff;

    .mat-mdc-snackbar-surface {
      background-color: #2196f3 !important;
    }

    .mat-mdc-snack-bar-label {
      color: #ffffff !important;
    }

    .mat-mdc-button.mat-mdc-snack-bar-action {
      color: #ffffff !important;
    }
  }
}

/* Default snackbar styling for M3 theme */
.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface {
  background-color: #323232 !important;
}

.mat-mdc-snack-bar-container .mat-mdc-snack-bar-label {
  color: #ffffff !important;
}

.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action {
  color: #90caf9 !important;
}

/* Global table overrides for generic table component - restore original Material Design */
app-generic-table {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  height: 100%;

  .mat-mdc-card {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    border-radius: 12px !important;
    overflow: hidden !important;
    background-color: var(--mat-sys-surface-container-lowest) !important;
  }

  .mat-mdc-card-header {
    background-color: var(--mat-sys-surface-container) !important;
    border-bottom: 1px solid var(--mat-sys-outline-variant) !important;
  }

  .mat-mdc-table {
    background-color: var(--mat-sys-surface-container-lowest) !important;
  }

  .mat-mdc-header-row {
    background-color: rgb(74, 93, 184) !important;
  }

  .mat-mdc-header-cell {
    font-weight: 500 !important;
    color: white !important;
    border-bottom: 2px solid rgb(58, 77, 168) !important;
    background-color: rgb(74, 93, 184) !important;

    .mat-sort-header-arrow {
      color: white !important;
    }
  }

  // Blue paginator styling - sticky at bottom
  .mat-mdc-paginator {
    position: sticky;
    bottom: 0;
    z-index: 2;
    background-color: rgb(74, 93, 184) !important;
    color: white !important;
    border-top: 1px solid rgb(58, 77, 168) !important;

    .mat-mdc-paginator-outer-container,
    .mat-mdc-paginator-container {
      background-color: rgb(74, 93, 184) !important;
      color: white !important;
    }

    .mat-mdc-paginator-page-size-label,
    .mat-mdc-paginator-range-label {
      color: white !important;
    }

    .mat-mdc-paginator-page-size-select {
      // Same blue as paginator bar with white text
      .mat-mdc-select-value,
      .mat-mdc-select-arrow {
        color: white !important;
      }

      .mat-mdc-select-trigger {
        background-color: rgb(74, 93, 184) !important;
        border-radius: 4px;
        padding: 4px 8px;
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
      }
    }

    .mat-mdc-select-value {
      color: white !important;
    }

    .mat-mdc-select-arrow {
      color: white !important;
    }

    .mat-mdc-form-field {
      background-color: rgb(74, 93, 184) !important;

      .mat-mdc-text-field-wrapper {
        background-color: rgb(74, 93, 184) !important;
        border-radius: 4px;
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
        padding: 0 !important;
      }

      .mat-mdc-form-field-flex {
        background-color: rgb(74, 93, 184) !important;
      }

      .mat-mdc-form-field-infix {
        background-color: rgb(74, 93, 184) !important;
        padding: 0 !important;
        min-height: auto !important;
      }

      .mdc-line-ripple,
      .mat-mdc-form-field-subscript-wrapper {
        display: none !important;
      }

      .mdc-text-field--filled:not(.mdc-text-field--disabled) {
        background-color: rgb(74, 93, 184) !important;
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: transparent !important;
      }
    }

    .mat-mdc-icon-button {
      color: white !important;

      &:disabled {
        color: rgba(255, 255, 255, 0.4) !important;
      }
    }

    .mat-mdc-paginator-icon {
      fill: white !important;
    }

    .mdc-icon-button {
      color: white !important;
    }

    svg {
      fill: white !important;
    }
  }

  .mat-mdc-row:hover {
    background-color: var(--mat-sys-surface-container-highest) !important;
  }

  .mat-mdc-cell {
    color: var(--mat-sys-on-surface) !important;
    border-bottom: 1px solid var(--mat-sys-outline-variant) !important;
  }

  // Search input styling
  .filter-section {
    .mat-mdc-form-field {
      .mat-mdc-text-field-wrapper {
        background-color: var(--mat-sys-surface-container) !important;
      }

      .mat-mdc-form-field-outline {
        border-color: var(--mat-sys-outline-variant) !important;
      }

      .mat-mdc-form-field-outline-start,
      .mat-mdc-form-field-outline-end,
      .mat-mdc-form-field-outline-gap {
        border-color: var(--mat-sys-outline-variant) !important;
      }

      &.mdc-text-field--focused .mat-mdc-form-field-outline {
        border-color: var(--mat-sys-primary) !important;
      }

      &.mdc-text-field--focused .mat-mdc-form-field-outline-start,
      &.mdc-text-field--focused .mat-mdc-form-field-outline-end,
      &.mdc-text-field--focused .mat-mdc-form-field-outline-gap {
        border-color: var(--mat-sys-primary) !important;
      }

      .mat-mdc-input-element {
        color: var(--mat-sys-on-surface) !important;
        background-color: var(--mat-sys-surface-container) !important;
      }

      .mat-mdc-icon-button {
        color: var(--mat-sys-on-surface-variant) !important;
        background-color: transparent !important;
      }

      .mat-mdc-icon-button:hover {
        background-color: var(--mat-sys-surface-container-highest) !important;
      }
    }
  }

  // Force light theme for form fields to prevent black backgrounds
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: var(--mat-sys-surface-container) !important;
    }

    .mat-mdc-form-field-flex {
      background-color: var(--mat-sys-surface-container) !important;
    }

    .mat-mdc-input-element {
      background-color: var(--mat-sys-surface-container) !important;
      color: var(--mat-sys-on-surface) !important;
    }
  }
}

/* Global Mat-Select Panel Styles */
.mat-mdc-select-panel,
.sync-interval-panel,
.retention-panel {
  background-color: white !important;
}

.mat-mdc-option {
  background-color: white !important;

  &:hover {
    background-color: rgba(0, 0, 0, 0.04) !important;
  }

  &.mdc-list-item--selected {
    background-color: rgba(0, 0, 0, 0.08) !important;
  }
}

/* CDK Overlay Fixes for Older Browsers (Edge 86) */
/* These styles ensure dropdowns work without :has() selector support */
.cdk-overlay-container {
  z-index: 1000 !important;
  position: fixed !important;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.cdk-overlay-backdrop {
  pointer-events: auto;
}

.cdk-overlay-pane {
  pointer-events: auto;
  z-index: 1001 !important;
}

.cdk-overlay-connected-position-bounding-box {
  z-index: 1001 !important;
}

/* Mat-Select dropdown panel */
.mat-mdc-select-panel {
  z-index: 1050 !important;
  background-color: #ffffff !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  border-radius: 4px !important;
  max-height: 256px !important;
  overflow-y: auto !important;
}

/* Ensure select options are visible and clickable */
.mat-mdc-select-panel .mat-mdc-option {
  background-color: #ffffff !important;
  color: #000000 !important;
  min-height: 48px !important;
}

.mat-mdc-select-panel .mat-mdc-option:hover {
  background-color: #f5f5f5 !important;
}

.mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected {
  background-color: #e3f2fd !important;
}

/* Fix for overlay wrapper positioning */
.cdk-global-overlay-wrapper {
  display: flex !important;
  position: fixed !important;
  z-index: 1000 !important;
}

/* Global Status Badge Styles */
.status-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;

  &.status-active {
    background-color: #e8f5e9;
    color: #2e7d32;
    border: 1px solid #4caf50;
  }

  &.status-inactive {
    background-color: #ffebee;
    color: #c62828;
    border: 1px solid #ef9a9a;
  }
}
