<h2 mat-dialog-title>
  <mat-icon>drive_file_move</mat-icon>
  Move to Category
</h2>

<mat-dialog-content>
  <p class="template-info">
    Moving: <strong>{{ templateName }}</strong>
  </p>

  <div class="category-selection">
    <p class="selection-label">Select a category:</p>

    <mat-selection-list [multiple]="false" class="category-list">
      <!-- Uncategorized option -->
      <mat-list-option
        [selected]="isSelected(null)"
        (click)="selectCategory(null)"
        class="category-option"
        [class.current]="data.currentCategoryId === null">
        <mat-icon matListItemIcon>folder_off</mat-icon>
        <div matListItemTitle>Uncategorized</div>
        <div matListItemLine class="option-hint">Default category for unorganized templates</div>
        <mat-icon *ngIf="data.currentCategoryId === null" matListItemMeta class="current-indicator">
          check_circle
        </mat-icon>
      </mat-list-option>

      <!-- Category options -->
      <mat-list-option
        *ngFor="let category of categories"
        [selected]="isSelected(category.id)"
        (click)="selectCategory(category.id)"
        class="category-option"
        [class.current]="data.currentCategoryId === category.id">
        <mat-icon matListItemIcon>folder</mat-icon>
        <div matListItemTitle>{{ category.name }}</div>
        <div matListItemLine class="option-hint">
          {{ category.templateCount }} template{{ category.templateCount !== 1 ? 's' : '' }}
          <span *ngIf="category.description"> - {{ category.description }}</span>
        </div>
        <mat-icon *ngIf="data.currentCategoryId === category.id" matListItemMeta class="current-indicator">
          check_circle
        </mat-icon>
      </mat-list-option>
    </mat-selection-list>

    <p *ngIf="categories.length === 0" class="no-categories">
      No custom categories available. Create one in "Manage Categories".
    </p>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="confirm()"
          [disabled]="selectedCategoryId === data.currentCategoryId">
    Move
  </button>
</mat-dialog-actions>
